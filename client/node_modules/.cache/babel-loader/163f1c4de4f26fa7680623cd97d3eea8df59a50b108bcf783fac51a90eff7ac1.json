{"ast":null,"code":"import _toConsumableArray from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext,useCallback}from'react';import'./MainPage.scss';import axios from'axios';import{AuthContext}from'../../context/AuthContext';import{useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MainPage=function MainPage(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useContext=useContext(AuthContext),userId=_useContext.userId;var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),todos=_useState4[0],setTodos=_useState4[1];var getTodo=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('api/todo',{headers:{'Content-Type':'application/json'},params:{userId:userId}}).then(function(response){return setTodos(response.data);});case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 8:case\"end\":return _context.stop();}},_callee,null,[[0,5]]);})),[userId]);var createTodo=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(text){_context2.next=2;break;}return _context2.abrupt(\"return\",null);case 2:_context2.prev=2;_context2.next=5;return axios.post('api/todo/add',{text:text,userId:userId},{headers:{'Content-Type':'application/json'}}).then(function(response){setTodos(_toConsumableArray(todos),response.data);setText('');getTodo();});case 5:_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[2,7]]);})),[text,userId,todos,getTodo]);var removeTodos=useCallback(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"/api/todo/delete/\".concat(id),{id:id},{headers:{'Content-Type':'application/json'}}).then(function(){return getTodo();});case 3:_context3.next=8;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 8:case\"end\":return _context3.stop();}},_callee3,null,[[0,5]]);}));return function(_x){return _ref3.apply(this,arguments);};}(),[getTodo]);var completedTodo=useCallback(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(id){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.put(\"api/todo/complete/\".concat(id),{id:id},{headers:{'Content-Type':'application/json'}}).then(function(response){setTodos(_toConsumableArray(todos),response.data);getTodo();});case 3:_context4.next=8;break;case 5:_context4.prev=5;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 8:case\"end\":return _context4.stop();}},_callee4,null,[[0,5]]);}));return function(_x2){return _ref4.apply(this,arguments);};}(),[getTodo,todos]);var importantTodo=useCallback(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(id){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios.put(\"api/todo/important/\".concat(id),{id:id},{headers:{'Content-Type':'application/json'}}).then(function(response){setTodos(_toConsumableArray(todos),response.data);getTodo();});case 3:_context5.next=8;break;case 5:_context5.prev=5;_context5.t0=_context5[\"catch\"](0);console.log(_context5.t0);case 8:case\"end\":return _context5.stop();}},_callee5,null,[[0,5]]);}));return function(_x3){return _ref5.apply(this,arguments);};}(),[getTodo,todos]);useEffect(function(){getTodo();},[getTodo]);return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-page\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Add task\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form form-login\",onSubmit:function onSubmit(e){return e.preventDefault();},children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"text\",name:\"input\",className:\"validate\",value:text,onChange:function onChange(e){return setText(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"input\",children:\"Task\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"button\",{className:\"waves-effect waves-light btn blue\",onClick:createTodo,children:\"Add task\"})})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Your tasks\"}),/*#__PURE__*/_jsx(\"div\",{className:\"todos\",children:todos.map(function(todo,index){var cls=['row flex todos-item'];if(todo.completed){cls.push('completed');}if(todo.important){cls.push('important');}return/*#__PURE__*/_jsxs(\"div\",{className:cls.join(' '),children:[/*#__PURE__*/_jsx(\"div\",{className:\"col todos-num\",children:index+1}),/*#__PURE__*/_jsx(\"div\",{className:\"col todos-text\",children:todo.text}),/*#__PURE__*/_jsx(\"div\",{className:\"col todos-buttons\"}),/*#__PURE__*/_jsx(\"i\",{className:\"material-icons blue-text\",onClick:function onClick(){return completedTodo(todo._id);},children:\"check\"}),/*#__PURE__*/_jsx(\"i\",{className:\"material-icons orange-text\",onClick:function onClick(){return importantTodo(todo._id);},children:\"warning\"}),/*#__PURE__*/_jsx(\"i\",{className:\"material-icons red-text\",onClick:function onClick(){return removeTodos(todo._id);},children:\"delete\"})]},index);})})]})});};export default MainPage;","map":{"version":3,"names":["React","useState","useContext","useCallback","axios","AuthContext","useEffect","MainPage","text","setText","userId","todos","setTodos","getTodo","get","headers","params","then","response","data","console","log","createTodo","post","removeTodos","id","delete","completedTodo","put","importantTodo","e","preventDefault","target","value","map","todo","index","cls","completed","push","important","join","_id"],"sources":["/Users/semen/Desktop/Organaizer Application/client/src/pages/MainPage/MainPage.jsx"],"sourcesContent":["import React, {useState, useContext, useCallback} from 'react'\nimport './MainPage.scss'\nimport axios from 'axios'\nimport { AuthContext } from '../../context/AuthContext'\nimport { useEffect } from 'react'\n\nconst MainPage = () => {\n\n    const [text, setText] = useState('')\n    const {userId} = useContext(AuthContext)\n    const[todos, setTodos] = useState([])\n\n    const getTodo = useCallback(async () =>{\n        try {\n            await axios.get('api/todo', {\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                params: {userId}\n            })\n            .then((response) => setTodos(response.data))\n        } catch (error) {\n            console.log(error)\n        }\n    }, [userId])\n\n\n    const createTodo = useCallback(async () => {\n        if(!text) return null\n        try {\n            await axios.post('api/todo/add', {text : text, userId: userId}, {\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            })\n            .then((response) => {\n                setTodos([...todos], response.data)\n                setText('')\n                getTodo()\n            })\n        } catch (error) {\n            console.log(error)\n        }\n    }, [text, userId, todos, getTodo])\n\n    const removeTodos = useCallback(async (id) =>{\n        try {\n            await axios.delete(`/api/todo/delete/${id}`, {id}, {\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            })\n            .then(() => getTodo())\n        } catch (error) {\n            console.log(error)\n        }\n    }, [getTodo])\n\n    const completedTodo = useCallback(async (id) => {\n        try {\n            await axios.put(`api/todo/complete/${id}`, {id}, {\n                headers: {\n                    'Content-Type': 'application/json'\n                } \n            })\n            .then(response => {\n                setTodos([...todos], response.data)\n                getTodo()\n            })\n        } catch (error) {\n            console.log(error)\n        }\n    }, [getTodo, todos])\n\n    const importantTodo = useCallback(async (id) => {\n        try {\n            await axios.put(`api/todo/important/${id}`, {id}, {\n                headers: {\n                    'Content-Type': 'application/json'\n                } \n            })\n            .then(response => {\n                setTodos([...todos], response.data)\n                getTodo()\n            })\n        } catch (error) {\n            console.log(error)\n        }\n    }, [getTodo, todos])\n\n\n\n\n\n\n    useEffect(() => {\n        getTodo()\n    }, [getTodo])\n\n    return(\n        \n        <div className='container'>\n            <div className='main-page'>\n                <h4>Add task</h4>\n                <form className='form form-login' onSubmit={e => e.preventDefault()}>\n                    <div className='row'>\n                        <div className='input-field col s12'>\n                            <input type='text'\n                                   id='text'\n                                   name='input'\n                                   className='validate'\n                                   value={text}\n                                   onChange={e => setText(e.target.value)}\n                                   />\n                                   <label htmlFor='input'>Task</label>\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <button\n                                className='waves-effect waves-light btn blue'\n                                onClick={createTodo}\n                                >Add task</button>\n                    </div>\n                </form>\n\n                <h3>Your tasks</h3>\n                <div className=\"todos\">\n                    {\n                        todos.map((todo, index) => {\n                            let cls = ['row flex todos-item']\n                                if(todo.completed) {\n                                    cls.push('completed')\n                                }\n                                if(todo.important) {\n                                    cls.push('important')\n                                }\n\n                            return(\n                            <div className={cls.join(' ')} key={index}>\n                                <div className=\"col todos-num\">{index+1}</div>\n                                <div className=\"col todos-text\">{todo.text}</div>\n                                <div className=\"col todos-buttons\"></div>\n                                <i className=\"material-icons blue-text\" onClick={() => completedTodo(todo._id)}>check</i>\n                                <i className=\"material-icons orange-text\" onClick={() => importantTodo(todo._id)}>warning</i>\n                                <i className=\"material-icons red-text\" onClick={() => removeTodos(todo._id)}>delete</i>\n                    </div>\n                        )}\n                        )}\n                </div>\n\n            </div>\n            \n        </div>\n    )\n}\n\nexport default MainPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}