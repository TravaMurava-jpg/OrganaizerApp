{"ast":null,"code":"import _slicedToArray from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useCallback}from\"react\";export var useAuth=function useAuth(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),userId=_useState4[0],setUserId=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isReady=_useState6[0],setIsReady=_useState6[1];var login=useCallback(function(jwtToken,id){setToken(jwtToken);setUserId(id);localStorage.setItem('userData',JSON.stringify({userId:id,token:jwtToken}));console.log('Heres tthe token set with login');},[]);var logout=function logout(){setToken(null);setUserId(null);localStorage.removeItem('userData');};useEffect(function(){var data=JSON.parse(localStorage.getItem('userData'));if(data&&data.token){login(data.token,data.userId);}setIsReady(true);console.log(data);},[login]);return{login:login,logout:logout,token:token,userId:userId,isReady:isReady};};","map":{"version":3,"names":["useState","useEffect","useCallback","useAuth","token","setToken","userId","setUserId","isReady","setIsReady","login","jwtToken","id","localStorage","setItem","JSON","stringify","console","log","logout","removeItem","data","parse","getItem"],"sources":["/Users/semen/Desktop/Organaizer Application/client/src/hooks/auth.hook.js"],"sourcesContent":["import {useState, useEffect, useCallback} from \"react\";\n\nexport const useAuth = () => {\n    const [token, setToken] = useState(null)\n    const [userId, setUserId] = useState(null)\n    const [isReady, setIsReady] = useState(false)\n\n    const login = useCallback((jwtToken, id) => {\n        setToken(jwtToken)\n        setUserId(id)\n        localStorage.setItem('userData', JSON.stringify({\n            userId: id,\n            token: jwtToken\n        }))\n        console.log('Heres tthe token set with login')\n    }, [])\n\n    const logout = () => {\n        setToken(null)\n        setUserId(null)\n        localStorage.removeItem('userData')\n    }\n\n    useEffect(() => {\n        const data = JSON.parse(localStorage.getItem('userData'))\n        if (data && data.token){\n            login(data.token, data.userId)\n        }\n        setIsReady(true)\n        console.log(data)\n    }, [login])\n\n\n    return {login, logout, token, userId, isReady}\n}\n\n"],"mappings":"wIAAA,OAAQA,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAO,OAAO,CAEtD,MAAO,IAAMC,QAAO,CAAG,QAAVA,QAAO,EAAS,CACzB,cAA0BH,QAAQ,CAAC,IAAI,CAAC,wCAAjCI,KAAK,eAAEC,QAAQ,eACtB,eAA4BL,QAAQ,CAAC,IAAI,CAAC,yCAAnCM,MAAM,eAAEC,SAAS,eACxB,eAA8BP,QAAQ,CAAC,KAAK,CAAC,yCAAtCQ,OAAO,eAAEC,UAAU,eAE1B,GAAMC,MAAK,CAAGR,WAAW,CAAC,SAACS,QAAQ,CAAEC,EAAE,CAAK,CACxCP,QAAQ,CAACM,QAAQ,CAAC,CAClBJ,SAAS,CAACK,EAAE,CAAC,CACbC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAEC,IAAI,CAACC,SAAS,CAAC,CAC5CV,MAAM,CAAEM,EAAE,CACVR,KAAK,CAAEO,QACX,CAAC,CAAC,CAAC,CACHM,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC,CAClD,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMC,OAAM,CAAG,QAATA,OAAM,EAAS,CACjBd,QAAQ,CAAC,IAAI,CAAC,CACdE,SAAS,CAAC,IAAI,CAAC,CACfM,YAAY,CAACO,UAAU,CAAC,UAAU,CAAC,CACvC,CAAC,CAEDnB,SAAS,CAAC,UAAM,CACZ,GAAMoB,KAAI,CAAGN,IAAI,CAACO,KAAK,CAACT,YAAY,CAACU,OAAO,CAAC,UAAU,CAAC,CAAC,CACzD,GAAIF,IAAI,EAAIA,IAAI,CAACjB,KAAK,CAAC,CACnBM,KAAK,CAACW,IAAI,CAACjB,KAAK,CAAEiB,IAAI,CAACf,MAAM,CAAC,CAClC,CACAG,UAAU,CAAC,IAAI,CAAC,CAChBQ,OAAO,CAACC,GAAG,CAACG,IAAI,CAAC,CACrB,CAAC,CAAE,CAACX,KAAK,CAAC,CAAC,CAGX,MAAO,CAACA,KAAK,CAALA,KAAK,CAAES,MAAM,CAANA,MAAM,CAAEf,KAAK,CAALA,KAAK,CAAEE,MAAM,CAANA,MAAM,CAAEE,OAAO,CAAPA,OAAO,CAAC,CAClD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}