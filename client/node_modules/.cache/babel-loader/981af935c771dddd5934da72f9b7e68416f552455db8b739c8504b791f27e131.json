{"ast":null,"code":"import _toConsumableArray from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import'./AllGroups.scss';import axios from'axios';import{useEffect,useContext}from'react';import{AuthContext}from'../../context/AuthContext';import{useCallback}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AllGroups=function AllGroups(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),groups=_useState2[0],setGroups=_useState2[1];var _useContext=useContext(AuthContext),userId=_useContext.userId;var getGroups=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('api/groups',{headers:{'Content-Type':'application/json'},params:{userId:userId}}).then(function(response){return setGroups(response.data);});case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 8:case\"end\":return _context.stop();}},_callee,null,[[0,5]]);})),[userId]);var applyGroup=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.put(\"api/groups/groups/\".concat(id),{id:id,userId:userId},{headers:{'Content-Type':'application/json'}}).then(function(response){setGroups(_toConsumableArray(groups),response.data);getGroups();});case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 8:case\"end\":return _context2.stop();}},_callee2,null,[[0,5]]);}));return function applyGroup(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){getGroups();},[getGroups]);return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-page\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"All groups\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"todos\",children:[groups.map(function(groups,index){var cls=[\"col todos-text\"];var isInGroup=false;groups.users.forEach(function(item){if(item.userId===userId){isInGroup=!isInGroup;}});console.log(groups.users);if(isInGroup){cls.push(\"green-text\");isInGroup=true;}console.log(isInGroup);return/*#__PURE__*/_jsxs(\"div\",{className:\"row flex todos-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col todos-num\",children:index+1}),/*#__PURE__*/_jsx(\"div\",{className:cls.join(' '),children:groups.groupName}),isInGroup?/*#__PURE__*/_jsx(\"div\",{className:\"col todos-buttons\",children:\"You are already in this group\"}):/*#__PURE__*/_jsx(\"div\",{className:\"col todos-buttons blue-text\",onClick:function onClick(){return applyGroup(groups._id);},children:\"Apply to a group\"})]},index);}),/*#__PURE__*/_jsx(\"div\",{className:\"col todos-text\",children:\"Green groups are your current groups\"})]})]})});};export default AllGroups;","map":{"version":3,"names":["React","useState","axios","useEffect","useContext","AuthContext","useCallback","AllGroups","groups","setGroups","userId","getGroups","get","headers","params","then","response","data","console","log","applyGroup","id","put","map","index","cls","isInGroup","users","forEach","item","push","join","groupName","_id"],"sources":["/Users/semen/Desktop/Organaizer Application/client/src/pages/AllGroups/AllGroups.jsx"],"sourcesContent":["import React, {useState} from 'react'\nimport './AllGroups.scss'\nimport axios from 'axios'\nimport { useEffect, useContext} from 'react'\nimport { AuthContext } from '../../context/AuthContext'\nimport { useCallback } from 'react'\n\nconst AllGroups = () => {\n\n    const [groups, setGroups] = useState([])\n    const {userId} = useContext(AuthContext)\n\nconst getGroups = useCallback( async () =>{\n    try {\n        await axios.get('api/groups', {\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            params: {userId}\n        })\n        .then((response) => setGroups(response.data))\n    } catch (error) {\n        console.log(error)\n    }\n},[userId])\n\nconst applyGroup = async(id) => {\n    try {\n        await axios.put(`api/groups/groups/${id}`, {id, userId}, {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        })\n        .then(response => {\n            setGroups([...groups], response.data)\n            getGroups()\n        })\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nuseEffect(() => {\n    getGroups()\n}, [getGroups])\n\n\nreturn(\n    <div className='container'>\n        <div className='main-page'>\n\n        <h3>All groups</h3>\n            <div className=\"todos\">\n                {\n                    groups.map((groups, index) => {\n                        let cls = [\"col todos-text\"]\n                        var isInGroup = false\n                        groups.users.forEach(function(item){\n                            if(item.userId === userId){\n                                isInGroup = !isInGroup\n                            }\n                        })\n                        console.log(groups.users)\n                        if(isInGroup){\n                            cls.push(\"green-text\")\n\n                            isInGroup = true\n                        }\n                        console.log(isInGroup)\n                        return(\n                            \n                        <div className=\"row flex todos-item\" key={index}>\n                            <div className=\"col todos-num\">{index+1}</div>\n                            <div className={cls.join(' ')}>{groups.groupName}</div>\n                           {isInGroup ? (<div className=\"col todos-buttons\">You are already in this group</div>) : (<div className=\"col todos-buttons blue-text\" onClick={() => applyGroup(groups._id)}>Apply to a group</div>)}\n                            \n                </div>\n                    )}\n                    )}\n                    <div className='col todos-text'>Green groups are your current groups</div>\n            </div>\n            \n        </div>\n        \n    </div>\n)\n\n}\n\nexport default AllGroups\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}