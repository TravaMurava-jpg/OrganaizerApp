{"ast":null,"code":"import _regeneratorRuntime from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from'react';import axios from'axios';import'./AuthPage.scss';import{AuthContext}from'../../context/AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AuthPage=function AuthPage(){var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isOk=_useState4[0],setIsOk=_useState4[1];var _useContext=useContext(AuthContext),login=_useContext.login;var changeHandler=function changeHandler(event){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},event.target.name,event.target.value)));};var loginHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post('api/auth/login',_objectSpread({},form),{headers:{'Content-Type':'application/json'}}).then(function(response){login(response.data.token,response.data.userId);});case 3:_context.next=9;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);console.log(_context.t0);setIsOk(false);case 9:case\"end\":return _context.stop();}},_callee,null,[[0,5]]);}));return function loginHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-page\",onSubmit:function onSubmit(e){return e.preventDefault();},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Welcome!\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form form-login\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",className:\"validate\",onChange:changeHandler}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",className:\"validate\",onChange:changeHandler}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[!isOk?/*#__PURE__*/_jsx(\"div\",{className:\"red-text\",children:\"Email or password doesn't exist\"}):'',/*#__PURE__*/_jsx(\"button\",{className:\"wawes-effect waves-light btn blue\",onClick:loginHandler,children:\"Login\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/registration\",className:\"btn-outline btn-reg\",children:\"Registration\"})]})]})]})})});};export default AuthPage;","map":{"version":3,"names":["React","useState","useContext","axios","AuthContext","AuthPage","email","password","form","setForm","isOk","setIsOk","login","changeHandler","event","target","name","value","loginHandler","post","headers","then","response","data","token","userId","console","log","e","preventDefault"],"sources":["/Users/semen/Desktop/Organaizer Application/client/src/pages/AuthPage/AuthPage.jsx"],"sourcesContent":["import React, { useState, useContext } from 'react'\n\nimport axios from 'axios'\n\nimport './AuthPage.scss'\nimport { AuthContext } from '../../context/AuthContext'\n\n\n\nconst AuthPage = () => {\n    const [form, setForm]  = useState({\n        email: '',\n        password: ''\n    })\n\n    const [isOk, setIsOk] = useState(true)\n\n    const { login } = useContext(AuthContext)\n\n    const changeHandler = (event) =>{\n        setForm({...form, [event.target.name]: event.target.value})\n    }\n\n    const loginHandler = async () => {\n        try {\n            await axios.post('api/auth/login', {...form}, {\n                headers: {\n                    'Content-Type' : 'application/json'\n                }\n            })\n            .then(response => {\n                login(response.data.token, response.data.userId)\n            })\n        } catch (error) {\n            console.log(error)\n            setIsOk(false)\n        }\n    }\n\n\n    return(\n       \n        \n        <React.Fragment>\n            <div className=\"container\">\n                <div className=\"auth-page\" onSubmit={e => e.preventDefault()}>\n                   \n                    <h3>Welcome!</h3>\n                    <form className=\"form form-login\">\n                        <div className=\"row\">\n                            <div className=\"input-field col s12\">\n                            <input type=\"text\"\n                                   name=\"email\"\n                                   className=\"validate\"\n                                   onChange={changeHandler}\n                            />\n                            <label htmlFor=\"email\">Email</label>\n                            </div>\n                        \n                        <div className=\"input-field col s12\">\n                            <input type=\"password\"\n                                   name=\"password\"\n                                   className=\"validate\"\n                                   onChange={changeHandler}\n                            />\n                            <label htmlFor=\"password\">Password</label>\n                            </div>\n                        </div>\n                        <div className=\"row\">\n                            {!isOk ? (<div className='red-text'>Email or password doesn't exist</div>):('')}\n                            <button className='wawes-effect waves-light btn blue'\n                                    onClick={loginHandler}\n                            >\n                                Login\n                            </button>\n\n                            <a href=\"/registration\" className=\"btn-outline btn-reg\">Registration</a>\n                        </div>\n                    </form>\n                    \n                </div>\n            </div>\n        </React.Fragment>\n       \n       \n        \n    )\n}\n\nexport default AuthPage"],"mappings":"yrBAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CAEnD,MAAOC,MAAK,KAAM,OAAO,CAEzB,MAAO,iBAAiB,CACxB,OAASC,WAAW,KAAQ,2BAA2B,yFAIvD,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,EAAS,CACnB,cAAyBJ,QAAQ,CAAC,CAC9BK,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,EACd,CAAC,CAAC,wCAHKC,IAAI,eAAEC,OAAO,eAKpB,eAAwBR,QAAQ,CAAC,IAAI,CAAC,yCAA/BS,IAAI,eAAEC,OAAO,eAEpB,gBAAkBT,UAAU,CAACE,WAAW,CAAC,CAAjCQ,KAAK,aAALA,KAAK,CAEb,GAAMC,cAAa,CAAG,QAAhBA,cAAa,CAAIC,KAAK,CAAI,CAC5BL,OAAO,gCAAKD,IAAI,wBAAGM,KAAK,CAACC,MAAM,CAACC,IAAI,CAAGF,KAAK,CAACC,MAAM,CAACE,KAAK,GAAE,CAC/D,CAAC,CAED,GAAMC,aAAY,4FAAG,0KAEPf,MAAK,CAACgB,IAAI,CAAC,gBAAgB,kBAAMX,IAAI,EAAG,CAC1CY,OAAO,CAAE,CACL,cAAc,CAAG,kBACrB,CACJ,CAAC,CAAC,CACDC,IAAI,CAAC,SAAAC,QAAQ,CAAI,CACdV,KAAK,CAACU,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAEF,QAAQ,CAACC,IAAI,CAACE,MAAM,CAAC,CACpD,CAAC,CAAC,sFAEFC,OAAO,CAACC,GAAG,aAAO,CAClBhB,OAAO,CAAC,KAAK,CAAC,mEAErB,kBAdKO,aAAY,0CAcjB,CAGD,mBAGI,KAAC,KAAK,CAAC,QAAQ,wBACX,YAAK,SAAS,CAAC,WAAW,uBACtB,aAAK,SAAS,CAAC,WAAW,CAAC,QAAQ,CAAE,kBAAAU,CAAC,QAAIA,EAAC,CAACC,cAAc,EAAE,EAAC,wBAEzD,oBAAI,UAAQ,EAAK,cACjB,cAAM,SAAS,CAAC,iBAAiB,wBAC7B,aAAK,SAAS,CAAC,KAAK,wBAChB,aAAK,SAAS,CAAC,qBAAqB,wBACpC,cAAO,IAAI,CAAC,MAAM,CACX,IAAI,CAAC,OAAO,CACZ,SAAS,CAAC,UAAU,CACpB,QAAQ,CAAEhB,aAAc,EAC7B,cACF,cAAO,OAAO,CAAC,OAAO,UAAC,OAAK,EAAQ,GAC9B,cAEV,aAAK,SAAS,CAAC,qBAAqB,wBAChC,cAAO,IAAI,CAAC,UAAU,CACf,IAAI,CAAC,UAAU,CACf,SAAS,CAAC,UAAU,CACpB,QAAQ,CAAEA,aAAc,EAC7B,cACF,cAAO,OAAO,CAAC,UAAU,UAAC,UAAQ,EAAQ,GACpC,GACJ,cACN,aAAK,SAAS,CAAC,KAAK,WACf,CAACH,IAAI,cAAI,YAAK,SAAS,CAAC,UAAU,UAAC,iCAA+B,EAAM,CAAG,EAAG,cAC/E,eAAQ,SAAS,CAAC,mCAAmC,CAC7C,OAAO,CAAEQ,YAAa,UAC7B,OAED,EAAS,cAET,UAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,qBAAqB,UAAC,cAAY,EAAI,GACtE,GACH,GAEL,EACJ,EACO,CAKzB,CAAC,CAED,cAAeb,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}