{"ast":null,"code":"import _toConsumableArray from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/semen/Desktop/Organaizer Application/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext,useCallback}from'react';import'./GroupsPage.scss';import axios from'axios';import{AuthContext}from'../../context/AuthContext';import{useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GroupsPage=function GroupsPage(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),groupName=_useState2[0],setGroupName=_useState2[1];var _useContext=useContext(AuthContext),userId=_useContext.userId;var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),groups=_useState4[0],setGroups=_useState4[1];var getGroup=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('api/group',{headers:{'Content-Type':'application/json'},params:{userId:userId}}).then(function(response){return setGroups(response.data);});case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 8:case\"end\":return _context.stop();}},_callee,null,[[0,5]]);})),[userId]);var createGroup=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(groupName){_context2.next=2;break;}return _context2.abrupt(\"return\",null);case 2:_context2.prev=2;_context2.next=5;return axios.post('api/group/add',{groupName:groupName,userId:userId},{headers:{'Content-Type':'application/json'}}).then(function(response){setGroups(_toConsumableArray(groups),response.data);setGroupName('');getGroup();});case 5:_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[2,7]]);})),[groupName,userId,getGroup,groups]);var removeGroups=useCallback(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;console.log(id);_context3.next=4;return axios.delete(\"/api/group/delete/\".concat(id),{headers:{'Content-Type':'application/json'},data:{id:id,userId:userId}}).then(function(){return getGroup();});case 4:_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 9:case\"end\":return _context3.stop();}},_callee3,null,[[0,6]]);}));return function(_x){return _ref3.apply(this,arguments);};}(),[getGroup,userId]);useEffect(function(){getGroup();},[getGroup]);return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-page\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"My groups\"}),/*#__PURE__*/_jsx(\"div\",{className:\"todos\",children:groups.map(function(groups,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"row flex todos-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col todos-num\",children:index+1}),/*#__PURE__*/_jsx(\"div\",{className:\"col todos-text\",children:groups.groupName}),/*#__PURE__*/_jsx(\"div\",{className:\"col todos-buttons\"}),/*#__PURE__*/_jsx(\"i\",{className:\"material-icons red-text\",onClick:function onClick(){return removeGroups(groups._id);},children:\"delete\"})]},index);})}),/*#__PURE__*/_jsx(\"h4\",{children:\"Create a group\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form form-login\",onSubmit:function onSubmit(e){return e.preventDefault();},children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"text\",name:\"input\",className:\"validate\",value:groupName,onChange:function onChange(e){return setGroupName(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"input\",children:\"Group name\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"button\",{className:\"waves-effect waves-light btn blue\",onClick:createGroup,children:\"Create\"})})]})]})});};export default GroupsPage;","map":{"version":3,"names":["React","useState","useContext","useCallback","axios","AuthContext","useEffect","GroupsPage","groupName","setGroupName","userId","groups","setGroups","getGroup","get","headers","params","then","response","data","console","log","createGroup","post","removeGroups","id","delete","map","index","_id","e","preventDefault","target","value"],"sources":["/Users/semen/Desktop/Organaizer Application/client/src/pages/GroupsPage/GroupsPage.jsx"],"sourcesContent":["import React, {useState, useContext, useCallback} from 'react'\nimport './GroupsPage.scss'\nimport axios from 'axios'\nimport { AuthContext } from '../../context/AuthContext'\nimport { useEffect } from 'react'\n\nconst GroupsPage = () => {\n    const [groupName, setGroupName] = useState('')\n    const {userId} = useContext(AuthContext)\n    const [groups, setGroups] = useState([])\n\n    const getGroup = useCallback(async () =>{\n        try {\n            await axios.get('api/group', {\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                params: {userId}\n            })\n            .then((response) => setGroups(response.data))\n        } catch (error) {\n            console.log(error)\n        }\n    }, [userId])\n\n    const createGroup = useCallback(async () => {\n        if(!groupName) return null\n        try {\n            await axios.post('api/group/add', {groupName : groupName, userId: userId}, {\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            })\n            .then((response) => { setGroups([...groups], response.data)\n                setGroupName('')\n                getGroup()\n            })\n        } catch (error) {\n            console.log(error)\n        }\n    }, [groupName, userId, getGroup, groups])\n\n\n    const removeGroups = useCallback(async (id) =>{\n        try {\n            console.log(id)\n            await axios.delete(`/api/group/delete/${id}`, {\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                data:{\n                    id: id,\n                    userId: userId\n                }\n            })\n            .then(() => getGroup())\n        } catch (error) {\n            console.log(error)\n        }\n    }, [getGroup, userId])\n\n\n\n    useEffect(() => {\n        getGroup()\n    }, [getGroup])\n\n    return(\n        <div className='container'>\n            <div className='main-page'>\n\n            <h3>My groups</h3>\n                <div className=\"todos\">\n                    {\n                        groups.map((groups, index) => {\n                            return(\n                            <div className=\"row flex todos-item\" key={index}>\n                                <div className=\"col todos-num\">{index+1}</div>\n                                <div className=\"col todos-text\">{groups.groupName}</div>\n                                <div className=\"col todos-buttons\"></div>\n                                <i className=\"material-icons red-text\" onClick={() => removeGroups(groups._id)}>delete</i>\n                    </div>\n                        )}\n                        )}\n                </div>\n                <h4>Create a group</h4>\n                <form className='form form-login' onSubmit={e => e.preventDefault()}>\n                    <div className='row'>\n                        <div className='input-field col s12'>\n                            <input type='text'\n                                   id='text'\n                                   name='input'\n                                   className='validate'\n                                   value={groupName}\n                                   onChange={e => setGroupName(e.target.value)}\n                                   />\n                                   <label htmlFor='input'>Group name</label>\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <button\n                                className='waves-effect waves-light btn blue'\n                                onClick={createGroup}\n                                >Create</button>\n                    </div>\n                </form>\n\n                \n            </div>\n            \n        </div>\n    )\n\n}\n\nexport default GroupsPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}